FROM frrouting/frr:v8.4.1

ENV DAEMONS="zebra bgpd ospfd isisd"
COPY ./daemons.conf /etc/frr/daemons.conf
RUN chown frr:frr /etc/frr/daemons.conf
# Use the official FRRouting image

# Install iproute2 for full `ip` commands (if not already present)
USER root
RUN apk update && \
    apk add iproute2 && \
    rm -rf /var/lib/apt/lists/*

# Make sure FRR runs as root (for simplicity)
USER root

# Start a shell by default
CMD ["/bin/bash"]
